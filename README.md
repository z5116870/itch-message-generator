# itch-message-generator
This project is a C++ application that generates ITCH protocol messages and sends them via UDP to a multicast IP address.  
It’s designed for local testing or simulation of market-data–style traffic, allowing developers to generate structured “ITCH” type messages and transmit them over a network. It was made for my other project, the [market-data-feed-handler](https://github.com/z5116870/market-data-feed-handler) which aims to receive the binary stream of ITCH messages generated by this application, and parse it into a kdb table. 

---

## Table of Contents
- [Background](#background)
- [Features](#features)
- [Getting Started](#getting-started)
  - [Prerequisites](#prerequisites)
  - [Building](#building)
  - [Running](#running)
- [Usage](#usage)
  - [Configuration](#configuration)
  - [Message Generation](#message-generation)
  - [UDP / Multicast Settings](#udp--multicast-settings)
- [Structure & Code Overview](#structure--code-overview)
- [Dependencies](#dependencies)

---

## Background
Stock exchanges around the world, such as NASDAQ and ASX, provide real-time data on market events, including order-book updates, trades, cancellations, and other activities. This information is typically transmitted via UDP multicast feeds. The ***ITCH protocol*** is a binary message format used to encode these events. It is widely adopted by authorized groups, such as trading firms, to model and process market activity, which they then use to execute trades. It is the parsing of these ITCH messages that allow for high frequency trading (HFT) algorithms to run. These groups can subscribe to specialized market data feeds to receive live updates.

For more details on the message formats used in this application, refer to the [ASX ITCH Protocol Specification](https://github.com/z5116870/itch-message-generator/blob/main/docs/ASX_ITCH_PROTOCOL_SPEC.pdf)

---

## Features

- Generate a variety of ITCH-style messages (orders, executions, etc.)
- Send messages via UDP multicast
- Configurable message rate, type, and payload contents
- Minimal external dependencies (pure standard C++)
- Example code for serialization and network sending

---

## Getting Started

### Prerequisites

- A C++ compiler supporting at least C++11 (e.g., GCC, Clang, or MSVC)
- A system with multicast support
- (Optional) CMake or other build system

### Building

Example command-line build:

```bash
cd build
cmake ..
make -j
sudo ./bin/itch_gen 239.1.1.1 30001
```
The program will start generating ITCH messages and broadcasting them to the provided multicast address and port.

### 1. Running Tests
Option A: Run the test binary directly
```
./bin/mdfh_unit_tests
```

To filter tests:
```
./bin/mdfh_unit_tests --gtest_filter=ParseTests.*
```

Option B: Run tests via CTest
```
ctest -V
```

Very verbose mode:
```
ctest -VV
```
### 2. Running Benchmarks

Run:
```
./bin/benchmark_multithreading
```

### 3. Summary

- Run `sudo ./bin/mdfh <MULTICAST_IP> <PORT>`
- Run `cmake ..` and `make -j` inside build/.
- Binaries appear in `build/bin/.`
- Run tests using `ctest -V` or `./bin/mdfh_unit_tests`
- Run benchmarks using `./bin/benchmark_multithreading`.

## Usage
Configuration
Modify parameters in the source (e.g., helper.h, messages.h) to set:

Multicast IP and port

Message types and generation rates

Payload structure (IDs, sizes, prices, etc.)

### Message Generation
messages.cpp and messages.h define the ITCH message formats and serialization logic.
Each message corresponds to a protocol type, with fields like order ID, timestamp, and price.
main.cpp orchestrates message creation and sending.

### UDP / Multicast Settings
Ensure your OS/network allows sending to multicast groups

Use a receiver listening on the same multicast IP/port

Adjust TTL or loopback options as needed

## Future work
Extension of the IMG is planned to support a rerequest server running on a separate thread to allow clients running the MDFH to request lost messages. Requires storing window of all messages. 

## Structure & Code Overview
```
itch-message-generator/
├── build/          # Build directory (binaries in bin/)
├── docs/           # All docs and diagrams
├── include/        # Public headers (including inline functions)
├── screenshots/    # Example outputs, logs, benchmark results or diagrams
├── src/            # Source code (parsing logic, main, etc.)
├── test/           # Tests and sample data for parsing / packet handling
├── .gitignore
├── CMakeLists.txt
├── LICENSE
└── README.md
```

